# SHARC-Surfgen
This is an example of how to use [SHARC](https://github.com/sharc-md/sharc) with potential energy surfaces constructed by Surfgen.
This repository includes the ammonia singlet and triplet surfaces generated by the [Yarkony Group](https://github.com/yarkonygrp/).
See the [wiki](https://github.com/cavanes1/SHARC-Surfgen/wiki) for more details.

## Usage

1. Use wigner.py by running `$SHARC/wigner.py sharc-main/molden.freq -n 5000` (you may need more than 5000 if using energy bins)
2. Load the needed module `ml intel/2020.1` and compile in sharc-surfgen without the electric field with `make`. This step must be performed now if using energy bins. Otherwise, you can wait until step 6.
3. Make sure to `chmod +x sharc-surfgen/surfgen.x sharc-main/run.sh sharc-main/QM/runQM.sh sharc-main/QM/inQM.sh` if these do not already have executable permissions
5. Edit geninp.py as needed `vi geninp.py`
4. Run geninp.py using `sbatch geninp.sl`
6. If using an electric field, compile sharc-surfgen with the field enabled
7. Submit run.sh with `sbatch submit.sl` or `python parallel.py` in order to run SHARC
8. Perform analysis using the tools in the trajdata directory via `sbatch collectgeominfo.sh`, and don't forget to account for bad trajectories: `cat slurm-* | grep trajdata | sort -u`
9. To clear up space after data is collected, delete the QM directories, e.g., `rm -r trajdata/traj*/QM`
